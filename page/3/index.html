<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="天生极客">
<meta property="og:type" content="website">
<meta property="og:title" content="王子子的成长之路">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="王子子的成长之路">
<meta property="og:description" content="天生极客">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="王子子的成长之路">
<meta name="twitter:description" content="天生极客">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/3/"/>





  <title> 王子子的成长之路 </title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">王子子的成长之路</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
    
      <p class="site-subtitle">王子子</p>
    
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-course">
          <a href="/categories/历程" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-blind"></i> <br />
            
            历程
          </a>
        </li>
      
        
        <li class="menu-item menu-item-study">
          <a href="/categories/学习" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-plug"></i> <br />
            
            学习
          </a>
        </li>
      
        
        <li class="menu-item menu-item-essay">
          <a href="/categories/随笔" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-optin-monster"></i> <br />
            
            随笔
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/22/天池赛IJCAI-17 口碑商家客流量预测 解题思路/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="王子子">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://ww3.sinaimg.cn/large/646083e8jw1e4k8rg9xhdj20ai0am3z6.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="王子子的成长之路">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="王子子的成长之路" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/22/天池赛IJCAI-17 口碑商家客流量预测 解题思路/" itemprop="url">
                  天池赛IJCAI-17 口碑商家客流量预测 解题思路
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-22T21:40:03+08:00">
                2017-03-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/历程/" itemprop="url" rel="index">
                    <span itemprop="name">历程</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://tianchi.shuju.aliyun.com/competition/information.htm?spm=5176.100067.5678.2.zu3kSJ&amp;raceId=231591" target="_blank" rel="external">赛题与数据</a><br>
<a href="https://github.com/heavysheep/tianchi" target="_blank" rel="external">代码</a></p>
<h2 id="基本数据创建">基本数据创建</h2>
<p><strong>result</strong>：每家店铺每日交易成功数量<br>
<strong>view</strong>：每家店铺每日浏览量</p>
<h2 id="参数分解">参数分解</h2>
<h3 id="shop_info">shop_info</h3>
<table>
<thead>
<tr class="header">
<th align="center">shop_id</th>
<th align="center">city_name</th>
<th align="center">location_id</th>
<th align="center">per_pay</th>
<th align="center">score</th>
<th align="center">comment_cnt</th>
<th align="center">shop_level</th>
<th align="center">cate_name..</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">商家id</td>
<td align="center">城市名</td>
<td align="center">所在位置编号</td>
<td align="center">人均消费</td>
<td align="center">评分</td>
<td align="center">评论数</td>
<td align="center">商铺等级</td>
<td align="center">分类</td>
</tr>
</tbody>
</table>
<p><strong>shop_id</strong>：主键，索引<br>
<strong>city_name</strong>：获取气温、消费能力、消费习惯<br>
<strong><del>location_id</del></strong>：聚类算法，估计功效太低没什么意义，pass<br>
<strong>per_pay</strong>：检测与result负相关，与view负相关。<br>
<strong>socre</strong>：检测与result正相关，与view正相关。<br>
<strong>comment_cnt</strong>：检测与result正相关，与view正相关。<br>
<strong>shop_level</strong>：检测与result正相关，与view正相关。<br>
<strong>cate_name</strong>：分类太细，考虑只保留使用“超市”和“美食”进行区分。</p>
<p>检测<strong>per_pay</strong>、<strong>score</strong>、<strong>comment_cnt</strong>、<strong>shop——level</strong>与<strong>view</strong>、<strong>result</strong>的关联度。<br>
score有很大的问题：这个值是处于变动的。</p>
<h3 id="user_pay">user_pay</h3>
<table>
<thead>
<tr class="header">
<th align="center">user_id</th>
<th align="center">shop_id</th>
<th align="center">time_stamp</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">付费用户id</td>
<td align="center">商家id</td>
<td align="center">消费时间</td>
</tr>
</tbody>
</table>
<p><strong>time_stamp</strong>：分解出日期<strong>day</strong>和时间<strong>time</strong>列。</p>
<h3 id="user_view">user_view</h3>
<table>
<thead>
<tr class="header">
<th align="center">user_id</th>
<th align="center">shop_id</th>
<th align="center">time_stamp</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">浏览用户id</td>
<td align="center">商家id</td>
<td align="center">浏览时间</td>
</tr>
</tbody>
</table>
<p><strong>time_stamp</strong>：分解出日期<strong>day</strong>和时间<strong>time</strong>列。</p>
<h2 id="特征工程">特征工程</h2>
<p>1.考虑到口碑是2015年6月23日开始发布，必然遭遇冷启动和虚假数据问题，那么时间序列中，体现趋势的指标应该是7日移动平均线ma，影响最大的特征因子应该是最近一次的ma_7。<br>
2.城市天气逻辑体现非常重要，主要划分了三级（晴，小雨/小雪/，大雨/雪），但划分后的效果并不很好。<br>
3.当日是否为工作日，次日是否为工作日比较重要。<br>
4.16年情人节到过年的那周视为噪音。<br>
5.GDP作为特征果然没效果，删了。</p>
<h2 id="感受">感受</h2>
<p>1.以不同可索引对象制造的模型再融合有巨大威力，第一次瞎配的权重都带来了最好的提升。<br>
2.solo的问题不在于想法…判断出哪个想法提升最多是最重要的，当然这需要经验。<br>
3.xgboost因为bug跑不起来，没时间走ARIMA，也没时间再上prophet，凄苦…水平不够时候有队友提升会比较快。<br>
4.合理利用每日评分确定正确方向是非常有必要的，相信前几的差距已经是谁对趋势判断更敏锐了。<br>
5.全身心的投入大约勉强能进前200，看wepon大神的blog，对底层的理解还是很重要，今后要加强学习和训练。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/17/最近在做测试/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="王子子">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://ww3.sinaimg.cn/large/646083e8jw1e4k8rg9xhdj20ai0am3z6.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="王子子的成长之路">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="王子子的成长之路" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/03/17/最近在做测试/" itemprop="url">
                  最近在做测试
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-17T14:25:46+08:00">
                2017-03-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/历程/" itemprop="url" rel="index">
                    <span itemprop="name">历程</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>最近一直在忙测试相关工作，记录下测试工作心得：<br>
1.重要的不仅只是懂业务流程，也要把思路抽离在流程之外。因为产品在设计时，往往会先定下大的方向，再逐渐寻找最优路线，在不停的修改中，也许已经偏离“可用”的轨道，此时测试应该代入的是用户的思路，对测试时找到的BUG，提出期望结果；对不合适的流程，也要提出优化期望。<br>
2.细化的测试用例很重要，一方面可用于自动化测试的架构，另一方面，越细的测试用例，在写的时候就能发现非常多的问题。<br>
3.如果作为懂技术的测试人员，对于测出的问题，应该做到比写这个功能的开发了解的更透彻，这也是一个测试人员平庸和杰出的分水岭。<br>
4.测试人员是产品和开发扯皮中的重要第三方，沟通非常重要。<br>
5.同上，测试“可信任”也是非常重要的，对能复现的问题，一定要通过复现从而找出问题；对不能复现的问题，记录下相关操作以便将来找出原因，直觉是知识、感官的积累，对于难以找到原因的问题，直觉非常重要。<br>
6.最好的用例就是文档，文档即用例。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/24/Paxos算法简易理解/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="王子子">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://ww3.sinaimg.cn/large/646083e8jw1e4k8rg9xhdj20ai0am3z6.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="王子子的成长之路">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="王子子的成长之路" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/24/Paxos算法简易理解/" itemprop="url">
                  Paxos算法简易理解
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-24T13:32:31+08:00">
                2017-02-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/学习/" itemprop="url" rel="index">
                    <span itemprop="name">学习</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="简介">简介</h2>
<p>Paxos算法简单来说就是一个在异步分布式系统里用以保证一致性的投票算法，严格来说，Paxos并不是一个算法，而是一个经过严谨逻辑推导出的投票方式。该算法由莱斯利·兰伯特于1990年提出，只由一些必须要被满足的基本条件推导得出，因此Paxos是在所有分布式算法中最简单，同时也是最稳定的算法。</p>
<p>Paxos应用于“基于消息传递且要求具有高度容错特性”的场景，在“共享内存”的分布式场景中并不适用，另外，虽然有许多基于Paxos的一致性算法，但都没有paxos稳定。</p>
<p>谷歌在其分布式锁服务（Chubby lock）中应用了Paxos算法。Yahoo!开源的ZooKeeper是一个开源的类Paxos实现，而hadoop也支持ZooKeeper协议。</p>
<blockquote>
<p>这个世界上只有一种一致性算法，那就是Paxos，其它的算法都是残次品 – Mike Burrows</p>
</blockquote>
<h2 id="算法假设">算法假设</h2>
<p>1.不存在<a href="https://zh.wikipedia.org/wiki/%E6%8B%9C%E5%8D%A0%E5%BA%AD%E5%B0%86%E5%86%9B%E9%97%AE%E9%A2%98" target="_blank" rel="external">拜占庭将军问题</a>（一条消息可能被传递两次，但在传递中不会出错） 2.只要等待足够的时间，消息就会被传到(信息必定到达） 3.每个节点对于信息，接收到信息即以为赞同，同时只有接受和忽略，没有反对。（只可根据赞成数来确定结果） 4.信息不一定会被成功传递，也无法确定传递时间。（包容传递失败，并确定在此条件下也能保持一致性） ##算法定义 在一个分布式系统中，每个节点会有最少1种，最多3种身份，分别是<strong>proposers（提案者）</strong>、<strong>acceptors（批准者）</strong>、<strong>learners（接受者）</strong>，他们在节点中相互传递信息被称为<strong>value（决议）</strong>。 1.决议只能被提案者提出，同时随决议附有一个编号，编号是递增且唯一的； 2.任何两个提案编号之间构成偏序（意味着提案者的编号大小是有意义的；同一次提案，提案者的权限是有等级分别的）； 3.在一次算法执行中，每个批准者一次只批准一条决议，并且只与最新的决议形成交互（意味着可能存在信息队列）； 4.收到超过半数的表态，即视为通过决议，并向所有人广播； 5.接受者只能获得最终被批准的决议。 需要注意的是，节点可以同时拥有三种身份，当节点既是提案者，又是批准者时，他必定会为自己提出的决议投出一票。</p>
<h2 id="实例">实例</h2>
<p>东方网准备开一场主题为“智橙生活未来发展方向”的会议，与会人员分别是董事长何XX、副董事长徐XX、纪委书记金X、副总裁高X、技术总监老王。与会人员都可以<strong>提案</strong>和<strong>赞同</strong>，一人一票。其他未与会人员例如开发、产品、数据分析师等，只能<strong>接受</strong>讨论结果（定义5）。</p>
<p>第一天：董事长提案智橙生活应该主打“上海市民离不开的产品”，其他4人纷纷表示“赞同”，董事长收到其他4人的表态，开心的表示全票通过，向所有人广播<strong>“产品基调定好，新的提案不得再讨论本问题”</strong>，全场统一。</p>
<p>第二天：董事长提案智橙生活应该添加“为民办事”功能，老王不能装作听不见，只好表示“赞同”（假设3），副总裁和纪委书记睡着了，无法表态，董事长等了半天只等到了两个表态，表示少两人老子照样干，加上自己一票通过了决议（定义4），向所有人广播<strong>“功能确定，新的提案不得再讨论本问题”</strong>，全场统一。</p>
<p>第三天：副总裁和纪委书记睡醒了，发现了董事长的提案，但同时（或更早）收到了提案结果的广播，于是他们<strong>不必再对此提案表态</strong>，全场统一。</p>
<p>第四天：轮到老王提案，他提出了“打磨产品，塑造核心功能点”的主旨，这时其他4位领导都睡着了，老王未获得任何表态。<strong>决议失败，不能向任何人广播。只能重新提案</strong>，全场统一。</p>
<p>第五天：4位领导终于都醒了，这时董事长提出了“尽可能多的造功能，我们要做一款万能APP”的主旨，老王再次提出昨天的提案，其他三位领导先听见了董事长的训示，纷纷表态支持，这时才反应过来老王有一份同样的提案，这时有两种情况：</p>
<p>老王职级低：其他领导表态后收到了老王的提案并发现是相同的提案（定义3），但老王的职级比他们的低，因此会<strong>忽略</strong>老王的提案，全场统一。</p>
<p>老王职级高：其他领导表态后收到了老王的提案并发现是相同的提案（定义3），他们会向老王<strong>回复之前已经通过了的提案及其内容并忽略投票</strong>，这样老王会知道自己的提案无望，全场统一。</p>
<p>第六天：董事长和老王同时说出对一件事的提案，并且获得邻座（近邻节点）的迅速反馈，此时老王邻座的副总裁和纪委书记先向老王表态“赞同”，当董事长的提案到来时，他们会再次表示“赞同”。而副董事长先向董事长的提案表示“赞同”后，收到了老王的提案，此时他将向老王表示“已有大人物关注此事，你不要插手”（定义2）。<strong>当信息传递结束，高权限必定获得更高的“赞同”</strong>，提案通过，全场统一。</p>
<p>第七天：老王总结出了深刻的人生哲理：在异步的任何情况下，即使<strong>某一节点出于某些原因无法接受信息，也绝不影响该节点以及总体对于一致性的检测</strong>，并且<strong>为了保证异步一致，权限相对较低的节点在提案和投票中处于较不利的位置</strong>。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/18/使用sklearn进行数据预处理 —— 归一化-标准化-正则化/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="王子子">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://ww3.sinaimg.cn/large/646083e8jw1e4k8rg9xhdj20ai0am3z6.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="王子子的成长之路">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="王子子的成长之路" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/18/使用sklearn进行数据预处理 —— 归一化-标准化-正则化/" itemprop="url">
                  使用sklearn进行数据预处理 —— 归一化/标准化/正则化
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-18T23:23:34+08:00">
                2017-02-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/学习/" itemprop="url" rel="index">
                    <span itemprop="name">学习</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>本文主要是对照scikit-learn的preprocessing章节结合代码简单的回顾下预处理技术的几种方法，主要包括标准化、数据最大最小缩放处理、正则化、特征二值化和数据缺失值处理。内容比较简单，仅供参考！</p>
<p>首先来回顾一下下面要用到的基本知识。 ## <strong>一、知识回顾</strong> 均值公式： <span class="math display">\[\bar{x}=\frac{1}{n}\sum_{i=1}^{n}x_{i}\]</span> 方差公式： <span class="math display">\[s^{2}=\frac{1}{n}\sum_{i=1}^{n}(x_{i}-\bar{x})^{2}\]</span> 0-范数，向量中非零元素的个数。 1-范数： <span class="math display">\[||X||=\sum_{i=1}^{n}|x_{i}|\]</span> 2-范数： <span class="math display">\[||X||_{2}=(\sum_{i=1}^{n}x_{i}^{2})^{\frac{1}{2}}\]</span> p-范数的计算公式： <span class="math display">\[||X||_{p}=(\sum_{i=1}^{n}x_{i}^{p})^{\frac{1}{p}}\]</span></p>
<hr>
<p>数据标准化：当单个特征的样本取值相差甚大或明显不遵从高斯正态分布时，标准化表现的效果较差。实际操作中，经常忽略特征数据的分布形状，移除每个特征均值，划分离散特征的标准差，从而等级化，进而实现数据中心化。</p>
<h2 id="二标准化standardization或者去除均值和方差进行缩放"><strong>二、标准化(Standardization)，或者去除均值和方差进行缩放</strong></h2>
<p>公式为：(X-X_mean)/X_std 计算时对每个属性/每列分别进行.</p>
<p>将数据按其属性(按列进行)减去其均值，然后除以其方差。最后得到的结果是，对每个属性/每列来说所有数据都聚集在0附近，方差值为1。</p>
<p>首先说明下sklearn中preprocessing库里面的scale函数使用方法：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sklearn.preprocessing.scale(X, axis=<span class="number">0</span>, with_mean=<span class="keyword">True</span>, with_std=<span class="keyword">True</span>, copy=<span class="keyword">True</span>)</div></pre></td></tr></table></figure>
<p>根据参数的不同，可以沿任意轴标准化数据集。 参数解释：</p>
<ul>
<li>X：数组或者矩阵</li>
<li>axis：int类型，初始值为0，axis用来计算均值 means 和标准方差 standard + deviations. 如果是0，则单独的标准化每个特征（列），如果是1，则标准化每个观测样本（行）。</li>
<li>with_mean: boolean类型，默认为True，表示将数据均值规范到0</li>
<li>with_std: boolean类型，默认为True，表示将数据方差规范到1</li>
</ul>
<p><strong>一个简单的例子</strong></p>
<p>假设现在我构造一个数据集X，然后想要将其标准化。下面使用不同的方法来标准化X：</p>
<p><strong>方法一：使用sklearn.preprocessing.scale()函数</strong></p>
<p>方法说明：</p>
<ul>
<li>X.mean(axis=0)用来计算数据X每个特征的均值；</li>
<li>X.std(axis=0)用来计算数据X每个特征的方差；</li>
<li>preprocessing.scale(X)直接标准化数据X。</li>
</ul>
<p>将代码整理到一个文件中：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> preprocessing   </div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np  </div><div class="line">X = np.array([[ <span class="number">1.</span>, <span class="number">-1.</span>,  <span class="number">2.</span>],  </div><div class="line">              [ <span class="number">2.</span>,  <span class="number">0.</span>,  <span class="number">0.</span>],  </div><div class="line">              [ <span class="number">0.</span>,  <span class="number">1.</span>, <span class="number">-1.</span>]])  </div><div class="line"><span class="comment"># calculate mean  </span></div><div class="line">X_mean = X.mean(axis=<span class="number">0</span>)  </div><div class="line"><span class="comment"># calculate variance   </span></div><div class="line">X_std = X.std(axis=<span class="number">0</span>)  </div><div class="line"><span class="comment"># standardize X  </span></div><div class="line">X1 = (X-X_mean)/X_std  </div><div class="line"><span class="comment"># use function preprocessing.scale to standardize X  </span></div><div class="line">X_scale = preprocessing.scale(X)</div></pre></td></tr></table></figure>
<p>最后X_scale的值和X1的值是一样的，前面是单独的使用数学公式来计算，主要是为了形成一个对比，能够更好的理解scale()方法。</p>
<p><strong>方法2：sklearn.preprocessing.StandardScaler类</strong></p>
<p>该方法也可以对数据X进行标准化处理，实例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> preprocessing   </div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np  </div><div class="line">X = np.array([[ <span class="number">1.</span>, <span class="number">-1.</span>,  <span class="number">2.</span>],  </div><div class="line">              [ <span class="number">2.</span>,  <span class="number">0.</span>,  <span class="number">0.</span>],  </div><div class="line">              [ <span class="number">0.</span>,  <span class="number">1.</span>, <span class="number">-1.</span>]])  </div><div class="line">scaler = preprocessing.StandardScaler()  </div><div class="line">X_scaled = scaler.fit_transform(X)</div></pre></td></tr></table></figure>
<p>这两个方法得到最后的结果都是一样的。</p>
<h2 id="三将特征的取值缩小到一个范围如0到1"><strong>三、将特征的取值缩小到一个范围（如0到1）</strong></h2>
<p>除了上述介绍的方法之外，另一种常用的方法是将属性缩放到一个指定的最大值和最小值(通常是1-0)之间，这可以通过preprocessing.MinMaxScaler类来实现。</p>
<p>使用这种方法的目的包括：</p>
<ul>
<li>1、对于方差非常小的属性可以增强其稳定性；</li>
<li>2、维持稀疏矩阵中为0的条目。</li>
</ul>
<p>下面将数据缩至0-1之间，采用MinMaxScaler函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> preprocessing   </div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np  </div><div class="line">X = np.array([[ <span class="number">1.</span>, <span class="number">-1.</span>,  <span class="number">2.</span>],  </div><div class="line">              [ <span class="number">2.</span>,  <span class="number">0.</span>,  <span class="number">0.</span>],  </div><div class="line">              [ <span class="number">0.</span>,  <span class="number">1.</span>, <span class="number">-1.</span>]])  </div><div class="line">min_max_scaler = preprocessing.MinMaxScaler()  </div><div class="line">X_minMax = min_max_scaler.fit_transform(X)</div></pre></td></tr></table></figure>
<p>最后输出：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">array([[ <span class="number">0.5</span>       ,  <span class="number">0.</span>        ,  <span class="number">1.</span>        ],  </div><div class="line">       [ <span class="number">1.</span>        ,  <span class="number">0.5</span>       ,  <span class="number">0.33333333</span>],  </div><div class="line">       [ <span class="number">0.</span>        ,  <span class="number">1.</span>        ,  <span class="number">0.</span>        ]])</div></pre></td></tr></table></figure>
<p>测试用例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">X_test = np.array([[ <span class="number">-3.</span>, <span class="number">-1.</span>,  <span class="number">4.</span>]])  </div><div class="line">X_test_minmax = min_max_scaler.transform(X_test)  </div><div class="line">X_test_minmax  </div><div class="line">array([[<span class="number">-1.5</span>       ,  <span class="number">0.</span>        ,  <span class="number">1.66666667</span>]])</div></pre></td></tr></table></figure>
<p>注意：这些变换都是对列进行处理。</p>
<p>当然，在构造类对象的时候也可以直接指定最大最小值的范围：feature_range=(min, max)，此时应用的公式变为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">X_std=(X-X.min(axis=<span class="number">0</span>))/(X.max(axis=<span class="number">0</span>)-X.min(axis=<span class="number">0</span>))  </div><div class="line">X_minmax=X_std/(X.max(axis=<span class="number">0</span>)-X.min(axis=<span class="number">0</span>))+X.min(axis=<span class="number">0</span>))</div></pre></td></tr></table></figure>
<h2 id="四正则化normalization"><strong>四、正则化(Normalization)</strong></h2>
<p>正则化的过程是将每个样本缩放到单位范数(每个样本的范数为1)，如果要使用如二次型(点积)或者其它核方法计算两个样本之间的相似性这个方法会很有用。</p>
<p>该方法是文本分类和聚类分析中经常使用的向量空间模型（Vector Space Model)的基础.</p>
<p>Normalization主要思想是对每个样本计算其p-范数，然后对该样本中每个元素除以该范数，这样处理的结果是使得每个处理后样本的p-范数(l1-norm,l2-norm)等于1。</p>
<p><strong>方法1：使用sklearn.preprocessing.normalize()函数</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>X = [[ <span class="number">1.</span>, <span class="number">-1.</span>,  <span class="number">2.</span>],  </div><div class="line"><span class="meta">... </span>     [ <span class="number">2.</span>,  <span class="number">0.</span>,  <span class="number">0.</span>],  </div><div class="line"><span class="meta">... </span>     [ <span class="number">0.</span>,  <span class="number">1.</span>, <span class="number">-1.</span>]]  </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>X_normalized = preprocessing.normalize(X, norm=<span class="string">'l2'</span>)  </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>X_normalized                                        </div><div class="line">array([[ <span class="number">0.40</span>..., <span class="number">-0.40</span>...,  <span class="number">0.81</span>...],  </div><div class="line">       [ <span class="number">1.</span>  ...,  <span class="number">0.</span>  ...,  <span class="number">0.</span>  ...],  </div><div class="line">       [ <span class="number">0.</span>  ...,  <span class="number">0.70</span>..., <span class="number">-0.70</span>...]])</div></pre></td></tr></table></figure>
<p><strong>方法2：sklearn.preprocessing.StandardScaler类</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>normalizer = preprocessing.Normalizer().fit(X)  <span class="comment"># fit does nothing </span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>normalizer  </div><div class="line">Normalizer(copy=<span class="keyword">True</span>, norm=<span class="string">'l2'</span>)</div></pre></td></tr></table></figure>
<p>然后使用正则化实例来转换样本向量：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>normalizer.transform(X)                              </div><div class="line">array([[ <span class="number">0.40</span>..., <span class="number">-0.40</span>...,  <span class="number">0.81</span>...],  </div><div class="line">       [ <span class="number">1.</span>  ...,  <span class="number">0.</span>  ...,  <span class="number">0.</span>  ...],  </div><div class="line">       [ <span class="number">0.</span>  ...,  <span class="number">0.70</span>..., <span class="number">-0.70</span>...]])  </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>normalizer.transform([[<span class="number">-1.</span>,  <span class="number">1.</span>, <span class="number">0.</span>]])               </div><div class="line">array([[<span class="number">-0.70</span>...,  <span class="number">0.70</span>...,  <span class="number">0.</span>  ...]])</div></pre></td></tr></table></figure>
<p>两种方法都可以，效果是一样的。</p>
<h2 id="五二值化binarization"><strong>五、二值化(Binarization)</strong></h2>
<p>特征的二值化主要是为了将数据特征转变成boolean变量。在sklearn中，sklearn.preprocessing.Binarizer函数可以实现这一功能。实例如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>X = [[ <span class="number">1.</span>, <span class="number">-1.</span>,  <span class="number">2.</span>],  </div><div class="line"><span class="meta">... </span>     [ <span class="number">2.</span>,  <span class="number">0.</span>,  <span class="number">0.</span>],  </div><div class="line"><span class="meta">... </span>     [ <span class="number">0.</span>,  <span class="number">1.</span>, <span class="number">-1.</span>]]  </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>binarizer = preprocessing.Binarizer().fit(X)  <span class="comment"># fit does nothing  </span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>binarizer  </div><div class="line">Binarizer(copy=<span class="keyword">True</span>, threshold=<span class="number">0.0</span>)  </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>binarizer.transform(X)  </div><div class="line">array([[ <span class="number">1.</span>,  <span class="number">0.</span>,  <span class="number">1.</span>],  </div><div class="line">       [ <span class="number">1.</span>,  <span class="number">0.</span>,  <span class="number">0.</span>],  </div><div class="line">       [ <span class="number">0.</span>,  <span class="number">1.</span>,  <span class="number">0.</span>]])</div></pre></td></tr></table></figure>
<p>Binarizer函数也可以设定一个阈值，结果数据值大于阈值的为1，小于阈值的为0，实例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>binarizer = preprocessing.Binarizer(threshold=<span class="number">1.1</span>)  </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>binarizer.transform(X)  </div><div class="line">array([[ <span class="number">0.</span>,  <span class="number">0.</span>,  <span class="number">1.</span>],  </div><div class="line">       [ <span class="number">1.</span>,  <span class="number">0.</span>,  <span class="number">0.</span>],  </div><div class="line">       [ <span class="number">0.</span>,  <span class="number">0.</span>,  <span class="number">0.</span>]])</div></pre></td></tr></table></figure>
<h2 id="六缺失值处理"><strong>六、缺失值处理</strong></h2>
<p>由于不同的原因，许多现实中的数据集都包含有缺失值，要么是空白的，要么使用NaNs或者其它的符号替代。这些数据无法直接使用scikit-learn分类器直接训练，所以需要进行处理。幸运地是，sklearn中的Imputer类提供了一些基本的方法来处理缺失值，如使用均值、中位值或者缺失值所在列中频繁出现的值来替换。</p>
<p>下面是使用均值来处理的实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> numpy <span class="keyword">as</span> np  </div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> Imputer  </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>imp = Imputer(missing_values=<span class="string">'NaN'</span>, strategy=<span class="string">'mean'</span>, axis=<span class="number">0</span>)  </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>imp.fit([[<span class="number">1</span>, <span class="number">2</span>], [np.nan, <span class="number">3</span>], [<span class="number">7</span>, <span class="number">6</span>]])  </div><div class="line">Imputer(axis=<span class="number">0</span>, copy=<span class="keyword">True</span>, missing_values=<span class="string">'NaN'</span>, strategy=<span class="string">'mean'</span>, verbose=<span class="number">0</span>)  </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>X = [[np.nan, <span class="number">2</span>], [<span class="number">6</span>, np.nan], [<span class="number">7</span>, <span class="number">6</span>]]  </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(imp.transform(X))                             </div><div class="line">[[ <span class="number">4.</span>          <span class="number">2.</span>        ]  </div><div class="line"> [ <span class="number">6.</span>          <span class="number">3.666</span>...]  </div><div class="line"> [ <span class="number">7.</span>          <span class="number">6.</span>        ]]</div></pre></td></tr></table></figure>
<p>Imputer类同样支持稀疏矩阵：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> scipy.sparse <span class="keyword">as</span> sp  </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>X = sp.csc_matrix([[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">0</span>, <span class="number">3</span>], [<span class="number">7</span>, <span class="number">6</span>]])  </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>imp = Imputer(missing_values=<span class="number">0</span>, strategy=<span class="string">'mean'</span>, axis=<span class="number">0</span>)  </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>imp.fit(X)  </div><div class="line">Imputer(axis=<span class="number">0</span>, copy=<span class="keyword">True</span>, missing_values=<span class="number">0</span>, strategy=<span class="string">'mean'</span>, verbose=<span class="number">0</span>)  </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>X_test = sp.csc_matrix([[<span class="number">0</span>, <span class="number">2</span>], [<span class="number">6</span>, <span class="number">0</span>], [<span class="number">7</span>, <span class="number">6</span>]])  </div><div class="line"><span class="meta">&gt;&gt;&gt; </span>print(imp.transform(X_test))                        </div><div class="line">[[ <span class="number">4.</span>          <span class="number">2.</span>        ]  </div><div class="line"> [ <span class="number">6.</span>          <span class="number">3.666</span>...]  </div><div class="line"> [ <span class="number">7.</span>          <span class="number">6.</span>        ]]</div></pre></td></tr></table></figure>
<p>sklearn相关英文版本:<a href="http://scikit-learn.org/stable/modules/preprocessing.html#preprocessing" target="_blank" rel="external">Preprocessing data</a> 中文版本:<a href="http://sklearn.lzjqsdd.com/modules/preprocessing.html#preprocessing" target="_blank" rel="external">数据预处理</a></p>
<p>本文提取自：http://blog.csdn.net/dream_angel_z/article/details/49406573</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/13/windows 10 github page + hexo + pandoc + next 搭建博客/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="王子子">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://ww3.sinaimg.cn/large/646083e8jw1e4k8rg9xhdj20ai0am3z6.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="王子子的成长之路">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="王子子的成长之路" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/02/13/windows 10 github page + hexo + pandoc + next 搭建博客/" itemprop="url">
                  windows 10 github page + hexo + pandoc + next 搭建博客
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-02-13T17:32:25+08:00">
                2017-02-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/历程/" itemprop="url" rel="index">
                    <span itemprop="name">历程</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>之前根据crossin的编程教室一系列教程使用githubpage + hexo + yilia成功搭建了博客，但是知其然不知其所以然，在尝试转变风格为next的时候花了不少功夫，痛定思痛之后决定把这些记录下来，以备将来再次安装使用。</p>
<p>简单的教程很多就不再赘述，直接粘贴当时看的教程。 <a href="https://mp.weixin.qq.com/s?__biz=MjM5MDEyMDk4Mw==&amp;mid=2650166025&amp;idx=1&amp;sn=50a22c1953f57db0240ca2d1363ba47a&amp;mpshare=1&amp;scene=1&amp;srcid=0212SeSbnQgvbyzfVgfSTdkK&amp;pass_ticket=W%2FXDrSAzGLlSbUsfxcw4MwwCTPprJvbUFD7S1QRB2CqUluJvZaS%2BxhURz44VWoNZ#rd" target="_blank" rel="external">用 GitHub + Hexo 建立你的第一个博客</a> <a href="https://mp.weixin.qq.com/s?__biz=MjM5MDEyMDk4Mw==&amp;mid=2650166037&amp;idx=1&amp;sn=377ea81674f6a31e32064f00138a5b01&amp;mpshare=1&amp;scene=1&amp;srcid=0212c2UUi4AG6E3mKtuDwH46&amp;pass_ticket=W%2FXDrSAzGLlSbUsfxcw4MwwCTPprJvbUFD7S1QRB2CqUluJvZaS%2BxhURz44VWoNZ#rd" target="_blank" rel="external">部署博客及更新博文</a> <a href="https://mp.weixin.qq.com/s?__biz=MjM5MDEyMDk4Mw==&amp;mid=2650166056&amp;idx=1&amp;sn=5693b76cd7528d76305f420deb2f2598&amp;mpshare=1&amp;scene=1&amp;srcid=0212VnzD5xbtWOLtxL0hsHZz&amp;pass_ticket=W%2FXDrSAzGLlSbUsfxcw4MwwCTPprJvbUFD7S1QRB2CqUluJvZaS%2BxhURz44VWoNZ#rd" target="_blank" rel="external">安装自己喜欢的主题</a></p>
<h2 id="更换markdown渲染引擎">更换markdown渲染引擎</h2>
<p>hexo默认只支持最基础的markdown渲染，为了实现现代化的功能（囧），改用pandoc来进行渲染。 首先前往<a href="http://www.pandoc.org/installing.html" target="_blank" rel="external">pandoc官网</a>下载并安装pandoc，安装成功后测试<code>pandoc --help</code>命令以确定安装成功。 之后安装pandoc作为hexo的渲染引擎，进入hexo目录后，输入以下命令：</p>
<pre><code>npm uninstall hexo-renderer-marked --save
npm install hexo-renderer-pandoc --save</code></pre>
<p>pandoc和基础markdown语法有细微不同，具体细节可以去官网查阅。</p>
<h2 id="支持latex数学公式">支持LATEX数学公式</h2>
<p>hexo目录中，输入以下命令：</p>
<pre><code>npm install hexo-math --save
hexo math install</code></pre>
<p>并且在网站配置的<code>_config.yml</code>文件中添加：</p>
<pre><code>plugins:
- hexo-math</code></pre>
<p>最后有一点许多教程都没有提到的，记得去正在使用的<strong>主题配置_config.yml</strong>中，将<strong>MathJex</strong>相关支持设定为<code>true</code>。</p>
<h2 id="更换主题为next">更换主题为next</h2>
<p>依然在hexo目录中，安装next主题</p>
<pre><code>git clone https://github.com/iissnan/hexo-theme-next themes/next</code></pre>
<p>打开站点配置文件<code>_config.yml</code>修改主题为next</p>
<pre><code>theme: next</code></pre>
<p>相关建议设置<a href="http://theme-next.iissnan.com/" target="_blank" rel="external">next官网</a>有清楚的描述。</p>
<h2 id="使用hexo的内建归档categories">使用Hexo的内建归档categories</h2>
<p>作者：碎瞳Artin 链接：https://www.zhihu.com/question/33324071/answer/58775540 来源：知乎 著作权归作者所有，转载请联系作者获得授权。</p>
<p>1.第一步：生成post（文章）时默认生成categories配置项：在根目录下scaffolds/post.md中，添加一行categories:。同理可应用在page.md和photo.md，示例如下：</p>
<pre><code>title: {{ title }}
date: {{ date }}
tags:
categories:
 # 此处为添加内容
---</code></pre>
<p>2.第二步：在实际写作时，在开头进行categories配置。例如：</p>
<pre><code>title: Hello，World!你好，世界！
date: 2014-01-21 23:33:02
tags: 写作 
categories: 随笔 # 配置categories</code></pre>
<p>这样在文章发布时，在git中使用hexo g命令，hexo会在根目录/public/categrises下自动生成归档文件夹，如图：</p>
<div class="figure">
<img src="http://static.zybuluo.com/heavysheep/ye3zdr046rdr45mncmpslrc1/image_1b8php9vm1tb71u91170v1kusmrqg.png" alt="image_1b8php9vm1tb71u91170v1kusmrqg.png-26kB">
<p class="caption">image_1b8php9vm1tb71u91170v1kusmrqg.png-26kB</p>
</div>
<p>3.第三步：配置博客首页归档展示样式。在主题配置文件themes/_config.yml中添加以下代码（#号后为注释内容）:</p>
<pre><code>menu:
  home: /
  essay: /categories/随笔     # 博客首页展示文本/访问路径/自定义归档名称
  write: /categories/写作     
  read: /categories/阅读       
  study: /categories/学习
  code: /categories/编程</code></pre>
<p>4.补充说明：如果发现博客首页展示文本为英文，需要改为中文显示，需要修改先博客根目录下的_config.yml文件的language配置，示例如下：</p>
<pre><code># Site
title: My Blog
subtitle: 
description: 
author: 
language: zh-CN # 修改此处，一般默认为default.yml，原生英文显示
timezone:</code></pre>
<p>然后为实现文章归档名称显示为中文，接着再修改主题配置文件下language/zh-CN.yml即可，示例如下：</p>
<pre><code>title:
  archive: 归档
  category: 分类
  tag: 标签
menu:
  home: 首页
  archives: 归档
  categories: 分类
  tags: 标签
  about: 关于
  essay: 随笔  # 编辑代码时注意语法规范如缩进、空格等
  read: 阅读   # Hexo采用yml语法，具体可自行搜索
  write: 写作</code></pre>
<p>5.最终展示效果（图中红框作强调用）：</p>
<div class="figure">
<img src="http://static.zybuluo.com/heavysheep/iufblxk57cnscrgaw2xfdvce/image_1b8phsloq155m1dbv9f9cgd6g4t.png" alt="image_1b8phsloq155m1dbv9f9cgd6g4t.png-41.6kB">
<p class="caption">image_1b8phsloq155m1dbv9f9cgd6g4t.png-41.6kB</p>
</div>
<p>6.点进某一归档分类如“阅读”，博客文章会依照归档配置，排序显示如下：</p>
<div class="figure">
<img src="http://static.zybuluo.com/heavysheep/ulra4asiae33y81ntpipyyrc/image_1b8pht2l6ifh1neh1k4i3hgsg21a.png" alt="image_1b8pht2l6ifh1neh1k4i3hgsg21a.png-27.1kB">
<p class="caption">image_1b8pht2l6ifh1neh1k4i3hgsg21a.png-27.1kB</p>
</div>
<p>**注：目前下载安装的hexo貌似都没有<code>zh-CN.yml</code>，而以<code>zh-Hans</code>代替，第四步修改对应文件即可。</p>
<h2 id="上传博客常用命令">上传博客常用命令</h2>
<p>hexo目录下：</p>
<pre><code># 清理缓存
hexo clean
# 生成静态文件
hexo generate
# 本地预览（在4000端口）
hexo s
#　提交至网站
hexo deploy</code></pre>
<p>文件前的title各标签视主题而有所不同。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>


          
          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://ww3.sinaimg.cn/large/646083e8jw1e4k8rg9xhdj20ai0am3z6.jpg"
               alt="王子子" />
          <p class="site-author-name" itemprop="name">王子子</p>
          <p class="site-description motion-element" itemprop="description">天生极客</p>
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/">
                <span class="site-state-item-count">18</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/heavysheep/" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/wang-zi-zi-81-12/activities" target="_blank" title="知乎">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  知乎
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Friends
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://andrewwang79.github.io" title="andrewwang" target="_blank">andrewwang</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">王子子</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  



  




	





  





  





  



  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config("");
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="custom_mathjax_source">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
  


  

  

  


</body>
</html>
